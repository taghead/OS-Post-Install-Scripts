- hosts: all
  remote_user: root
  become: yes
  tasks:
  - name: Installing Dependencies
    apt: 
      name: gnupg
      state: latest
  - name: Adding MongoDB Key
    apt_key:
      url: https://www.mongodb.org/static/pgp/server-4.2.asc
      state: present
  - name: Adding MongoDB Repository
    apt_repository:
      repo: deb http://repo.mongodb.org/apt/debian stretch/mongodb-org/4.2 main
      state: present
  - name: Installing MongoDB Packages
    apt:
      pkg:
      - mongodb-org=4.2.2
      - mongodb-org-server=4.2.2
      - mongodb-org-shell=4.2.2
      - mongodb-org-mongos=4.2.2
      - mongodb-org-tools=4.2.2
      
      
#  - name: Import the public key used by the package management system
#    apt_key: keyserver=hkp://keyserver.ubuntu.com:80 id=7F0CEB10 state=present
#  - name: Add MongoDB repository
#    apt_repository: repo='deb http://downloads-distro.mongodb.org/repo/ubuntu-upstart dist 10gen' state=present
#  - name: install mongodb
#    apt: pkg=mongodb-org state=latest update_cache=yes
#    notify:
#    - start mongodb
#  handlers:
#    - name: start mongodb
#      service: name=mongod state=started